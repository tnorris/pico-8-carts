pico-8 cartridge // http://www.pico-8.com
version 16
__lua__
-- # vim: ts=1:sw=1
function _init()
 cur_card=1
 last_input=time()
 input_delay=0.15
 select_delay=0.2
 last_select=time()
 active_card=0

 player={}
 player.hand={}
 player.hp=40

 player.deck={cards.stabby_boi,
  cards.stabby_boi,
  cards.stabby_boi,
  cards.block,
  cards.soup,
  cards.block,
  cards.block}

 new_turn()
end

function new_turn()
  player.hand={
   player.deck[1],
   player.deck[2],
   player.deck[3],
   player.deck[4],
   player.deck[5]}
end

function draw_card(pos, card, raised)
 local y_o=80
 if raised==true then
  y_o-=12
 end
 local cst={5,6,7}
 cst[0]=4
 local c=2
 local he=3
 local ve=18
 local f=19
 local p={
  {c,he,c},
  {ve,f,ve},
  {ve,f,ve},
  {c,he,c}
 }

 -- cardboard
 for col=1,4 do
  if 4==col then
    flipy=true
  else
    flipy=false
  end
  for row=1,3 do
   if(3==row) flipx=true else flipx=false 
   spr(p[col][row],(row-1)*8+pos,(col)*8+y_o,1,1,flipx,flipy)
  end
 end

 -- cost
 spr(cst[card.cost],14+pos,8+y_o)
 -- picture
 spr(card.t,pos+8,16+y_o)
 spr(card.b,pos+8,24+y_o)
end

function cur_move(dir)
 cur_card+=dir
 last_input=t()
 sfx(1)
 if cur_card > 5 then
  cur_card=1
 end
 if cur_card < 1 then
  cur_card=5
 end
end

function _update()
  local now=time()
  if now > last_input+input_delay then
   if btn(⬅️) then
    cur_move(-1)
   end
   if btn(➡️) then
    cur_move(1)
   end
  end
  if now > last_select+select_delay then
   if btn(❎) then
    sfx(0)
    last_select=now
    active_card=cur_card
   end
  end
end

function _draw()
 cls()

 -- cards
 for i=1,5 do
   draw_card((i-1)*24,player.hand[i], active_card==i)
 end

 -- cursor
 spr(1,(cur_card-1)*24+8,12+102)

 -- slime
	spr(26,32,32)
	
	-- big slime
	spr(27,40,18)
	spr(27,48,18,1,1,true)

 -- card text
 print(player.hand[cur_card].n,0,68)
 print(player.hand[cur_card].w,0,76)

end
-->8
cards={}
cards.stabby_boi={
 t=20,b=36,
 cost=1,
 cmd=dmg,arg=2,
 n="stabby boi",
 w="2 points of stab."}

cards.soup={
 t=17,b=16,
 cost=2,
 cmd=heal,arg=2,
 exhaust=true,
 n="soup",
 w="mom's soup. yum!"}

cards.block={
 t=22,b=38,
 cost=0,
 cmd=block,arg=5,
 n="shield",
 w="+5 block."}

function dmg(arg, caster, castee)
 castee.hp -= arg
end

function heal(arg, caster, castee)
 caster.hp += arg
end

function block(arg, caster, castee)
 caster.block += arg
end


__gfx__
00000000009999000001111111111111000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000099999900012222222222222000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
0070070099aaaa990122222222222222007770000077000000777000007070000000000000000000000000000000000000000000000000000000000000000000
0007700099a55a990122222222222222007070000007000000007000007070000000000000000000000000000000000000000000000000000000000000000000
0007700099a55a990122222222222222007070000007000000777000000700000000000000000000000000000000000000000000000000000000000000000000
0070070099aaaa990122222222222222007070000007000000700000007070000000000000000000000000000000000000000000000000000000000000000000
00000000099999900122222222222222007770000077700000777000007070000000000000000000000000000000000000000000000000000000000000000000
00000000009999000122222222222222000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000000122222222222222000600000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000088088000122222222222222006670000000000006666660000000000000000000000000000330000003333300000000000000000000000000000000
00000000888878800122222222222222006670000000000006333360000000000000000000999900033333300333373300000000000000000000000000000000
0000000088888880012222222222222200c670000000000006333360000000000000000009999990337373333333333300000000000000000000000000000000
0000000088888880012222222222222200c670000000000006333360000000000000000009999199333333333333377700000000000000000000000000000000
0000000008888800012222222222222200c670000000000006344360000000000000000009999999533337733333373300000000000000000000000000000000
0000000000888000012222222222222200c670000000000006644660000000000000000000998890053373300333333300000000000000000000000000000000
0000000000080000012222222222222200c660000000000000644600000000000000000000999900000000000000000000000000000000000000000000000000
0000000000000000000000000000000004c664000000000000666600000000000000000000999900000000000000000000000000000000000000000000000000
0000000000000000000000000000000044c664400000000000066000000000000000000000999000000000000000000000000000000000000000000000000000
00000000000000000000000000000000004440000000000000066000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000000000000000000000004440000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000000000000000000000005540000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
__gff__
0001000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
0000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
__map__
1313131313131313131313131313131300000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
1313131313131313131313131313131300000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
1313131313131313131313131313131300000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
1313131313131313131313131313131300000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
1313131313131313131313131313131300000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
1313131313131313131313131313131300000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
1313131313131313131313131313131300000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
1313131313131313131313131313131300000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
1313131313131313131313131313131300000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
__sfx__
000100000f0500f0501005012050160501a0501a05019050180500000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
000100002f0502f050310503405035050370403805001000010000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
